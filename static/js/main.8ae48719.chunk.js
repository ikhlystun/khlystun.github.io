(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a(38)},34:function(e,t,a){},35:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),s=a.n(c),i=a(2),l=a(3),o=a(5),u=a(4),h=a(7),m=a(6),p=a(12),d=a(11),b=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"container"},r.a.createElement(p.b,{to:"/",className:"navbar-brand"},"Film search")))}}]),t}(n.Component),f=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.handleReset=a.handleReset.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){this.props.onChange(e.target.value)}},{key:"handleSubmit",value:function(e){var t=this,a=this.props.value,n="https://api.themoviedb.org/3/search/multi?api_key=".concat("2d94eb1d15a9cdc01a2f012d877c3d87","&language=en&query=").concat(a);fetch(n).then(function(e){return 200!==e.status?Promise.reject():e.json()}).then(function(e){t.props.onSubmit(e.results)}).catch(function(e){t.props.onSubmit(null)}),e.preventDefault()}},{key:"handleReset",value:function(e){this.props.onReset(),e.preventDefault()}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h3",{className:"text-center"},"Find films"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",value:this.props.value,onChange:this.handleChange,className:"form-control",placeholder:"Game of thrones..."}),r.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:this.handleReset,style:{marginTop:"20px"}},"Reset search"))))}}]),t}(n.Component),v=(a(34),function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.post;return r.a.createElement("div",{className:"col-sm-6 col-lg-4"},r.a.createElement("div",{className:"post"},r.a.createElement(p.b,{to:"/post/"+e.id,className:"post__img"},r.a.createElement("img",{src:null!=e.poster_path?"https://image.tmdb.org/t/p/w300/"+e.poster_path:"http://www.sclance.com/pngs/no-image-png/no_image_png_935227.png",alt:e.title||e.name})),r.a.createElement(p.b,{to:"/post/"+e.id},e.title||e.name)))}}]),t}(n.Component)),g=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.posts,t=[];return Array.isArray(e)&&e.forEach(function(e){t.push(r.a.createElement(v,{key:e.id,post:e}))}),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},t))}}]),t}(n.Component),j=a(14),O=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).ref=Object(n.createRef)(),a.createPie=j.b().value(function(e){return e.value}).sort(null),a.createArc=j.a().innerRadius(e.innerRadius).outerRadius(e.outerRadius),a.colors=j.c(j.d),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=j.e(this.ref.current),a=this.createPie(this.props.pieChartData),n=this.props,r=n.width,c=n.height,s=n.outerRadius;t.attr("class","chart").attr("width",r).attr("height",c);var i=t.append("g").attr("transform","translate(".concat(s," ").concat(s,")")).selectAll("g.arc").data(a).enter().append("g").attr("class","arc");i.append("path").attr("class","arc").attr("d",this.createArc).attr("fill",function(t,a){return e.colors(t.index)}),i.append("text").text(function(e){return e.value}).attr("text-anchor","middle").attr("transform",function(t){return"translate(".concat(e.createArc.centroid(t),")")}).attr("fill","#fff").attr("font-size","9px");var l=t.append("g").attr("transform","translate(".concat(s," ").concat(s,")")).selectAll(".legend").data(this.createPie(this.props.pieChartData)).enter().append("g").attr("class","legend").attr("transform",function(t,a){var n=18*a-18*e.colors.domain().length/2;return"translate(".concat(-24,", ").concat(n,")")});l.append("rect").attr("width",12).attr("height",12).style("fill",function(t,a){return e.colors(t.index)}).style("stroke",function(t,a){return e.colors(t.index)}),l.append("text").text(function(e){return e.data.name}).attr("x",18).attr("y",6).attr("alignment-baseline","middle").attr("fill","#333").attr("font-size","14px")}},{key:"render",value:function(){return r.a.createElement("svg",{ref:this.ref})}}]),t}(n.Component),E=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={pieChartData:[]},a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.handleReset=a.handleReset.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){this.props.onChange(e)}},{key:"handleSubmit",value:function(e){this.props.onSubmit(e)}},{key:"handleReset",value:function(){this.props.onReset()}},{key:"fetchData",value:function(){var e=this,t=[{name:"plane"},{name:"car"},{name:"train"}],a="2d94eb1d15a9cdc01a2f012d877c3d87",n=["https://api.themoviedb.org/3/search/multi?api_key=".concat(a,"&language=en&query=").concat(t[0].name),"https://api.themoviedb.org/3/search/multi?api_key=".concat(a,"&language=en&query=").concat(t[1].name),"https://api.themoviedb.org/3/search/multi?api_key=".concat(a,"&language=en&query=").concat(t[2].name)];Promise.all(n.map(function(e){return fetch(e).then(function(e){return 200!==e.status?Promise.reject():e.json()})})).then(function(e){for(var a=0;a<e.length;a++)t[a].value=e[a].total_results}).then(function(){e.setState({pieChartData:t})})}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){if(!this.state.pieChartData.length)return null;var e=this.props.posts,t=this.props.value,a=this.state.pieChartData;return r.a.createElement(n.Fragment,null,r.a.createElement(b,null),r.a.createElement(f,{value:t,onChange:this.handleChange,onSubmit:this.handleSubmit,onReset:this.handleReset}),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-9"},r.a.createElement(g,{posts:e})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("h6",null,"Ratio of movies with Plane / Car / Train in title"),r.a.createElement(O,{width:"200",height:"200",innerRadius:"60",outerRadius:"100",pieChartData:a})))))}}]),t}(n.Component),y=(a(35),function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("posts")),t=this.props.match.params.id,a=e.find(function(e){return+e.id===+t});return r.a.createElement(n.Fragment,null,r.a.createElement(b,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"post-view row"},r.a.createElement("div",{className:"post-view__img col-md-5 col-lg-4"},r.a.createElement("img",{src:null!=a.poster_path?"https://image.tmdb.org/t/p/w500/"+a.poster_path:"http://www.sclance.com/pngs/no-image-png/no_image_png_935227.png",alt:a.title||a.name})),r.a.createElement("div",{className:"post-view__info col-md-7 col-lg-8"},r.a.createElement("h2",{className:"post-view__title"},a.title||a.name),r.a.createElement("p",{className:"post-view__desc"},a.overview),a.vote_average?r.a.createElement("div",{className:"post-view__meta"},r.a.createElement("strong",null,"Rating:")," ",a.vote_average):"",a.release_date||a.first_air_date?r.a.createElement("div",{className:"post-view__meta"},r.a.createElement("strong",null,"Date:")," ",a.release_date||a.first_air_date):""))))}}]),t}(n.Component)),_=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={value:null!==localStorage.getItem("searchText")?localStorage.getItem("searchText"):"",result:JSON.parse(localStorage.getItem("posts"))},a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a.handleReset=a.handleReset.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){this.setState({value:e})}},{key:"handleSubmit",value:function(e){this.setState({result:e})}},{key:"handleReset",value:function(){this.setState({value:"",result:null})}},{key:"render",value:function(){var e=this,t=this.state.result,a=this.state.value;return localStorage.setItem("posts",JSON.stringify(t)),localStorage.setItem("searchText",a),r.a.createElement(p.a,null,r.a.createElement(d.a,{exact:!0,path:"/",render:function(n){return r.a.createElement(E,Object.assign({},n,{value:a,onReset:e.handleReset,onChange:e.handleChange,onSubmit:e.handleSubmit,posts:t}))}}),r.a.createElement(d.a,{path:"/post/:id",render:function(e){return r.a.createElement(y,Object.assign({},e,{posts:t}))}}))}}]),t}(n.Component);a(36),a(37);s.a.render(r.a.createElement(_,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.8ae48719.chunk.js.map